(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{mDbg:function(t,e,r){"use strict";r.r(e),r.d(e,"ShopCartModule",(function(){return q}));var i=r("2kYt"),o=r("sEIs"),n=(r("hv/J"),r("C17D")),c=r("oMD5"),d=r("EM62"),a=r("xQ0O"),u=r("nIj0"),s=r("Meci"),m=r("29Wa"),l=r("Cd2c"),p=r("PBFl");const f=["formQDirective"];function b(t,e){1&t&&(d.Sb(0,"mat-error"),d.uc(1," Product quantity is a required field "),d.Rb())}function h(t,e){1&t&&(d.Sb(0,"mat-error"),d.uc(1," Product quantity must be major equal than 0 "),d.Rb())}function g(t,e){1&t&&(d.Sb(0,"mat-error"),d.uc(1," Product quantity must be minor equal than 10 "),d.Rb())}function y(t,e){if(1&t&&(d.Sb(0,"mat-error",7),d.uc(1),d.Rb()),2&t){const t=d.ec();d.Bb(1),d.vc(t.error)}}let v=(()=>{class t{constructor(t){this.formBuilder=t,this.evUpdateProd=new d.n,this.prod2Edit={id:"",name:"",price:void 0,description:"",quantity:void 0},this.error="",this.submitted=!1,this.form=this.formBuilder.group({quantity:["",[u.n.required,u.n.min(0),u.n.max(10)]]})}ngOnChanges(t){console.log("changes",t),t.prod2Edit&&t.prod2Edit.currentValue&&this.form.patchValue({quantity:t.prod2Edit.currentValue.quantity}),t.error&&console.error(t.error)}ngOnInit(){console.log("ngOnInit",this.prod2Edit)}get f(){return this.form.controls}onSubmit(){console.log("form",this.f),this.submitted=!0,this.form.valid&&(console.log(this.prod2Edit),this.updateProduct())}updateProduct(){this.evUpdateProd.emit({id:this.prod2Edit.id,name:this.prod2Edit.name,price:this.prod2Edit.price,description:this.prod2Edit.description,quantity:this.f.quantity.value}),this.resetProdEdit(),this.formQDirective.resetForm()}resetProdEdit(){this.prod2Edit={id:"",name:"",price:void 0,description:"",quantity:void 0}}}return t.\u0275fac=function(e){return new(e||t)(d.Nb(u.c))},t.\u0275cmp=d.Hb({type:t,selectors:[["ecommerce-quantity"]],viewQuery:function(t,e){var r;1&t&&d.yc(f,!0),2&t&&d.lc(r=d.bc())&&(e.formQDirective=r.first)},inputs:{prod2Edit:"prod2Edit",error:"error"},outputs:{evUpdateProd:"evUpdateProd"},features:[d.zb],decls:14,vars:6,consts:[[1,"product-cru"],[3,"formGroup","ngSubmit"],["formQDirective","ngForm"],["type","number","matInput","","placeholder","Quantity*","formControlName","quantity",3,"value"],[4,"ngIf"],["class","alert",4,"ngIf"],["mat-raised-button","","color","primary","type","submit"],[1,"alert"]],template:function(t,e){1&t&&(d.Sb(0,"mat-card",0),d.Sb(1,"mat-card-subtitle"),d.uc(2,"Edit Quantity"),d.Rb(),d.Sb(3,"mat-card-content"),d.Sb(4,"form",1,2),d.ac("ngSubmit",(function(){return e.onSubmit()})),d.Sb(6,"mat-form-field"),d.Ob(7,"input",3),d.tc(8,b,2,0,"mat-error",4),d.tc(9,h,2,0,"mat-error",4),d.tc(10,g,2,0,"mat-error",4),d.Rb(),d.tc(11,y,2,1,"mat-error",5),d.Sb(12,"button",6),d.uc(13,"Edit"),d.Rb(),d.Rb(),d.Rb(),d.Rb()),2&t&&(d.Bb(4),d.jc("formGroup",e.form),d.Bb(3),d.jc("value",null==e.prod2Edit?null:e.prod2Edit.quantity),d.Bb(1),d.jc("ngIf",e.submitted&&(null==e.f.quantity.errors?null:e.f.quantity.errors.required)),d.Bb(1),d.jc("ngIf",e.submitted&&(null==e.f.quantity.errors?null:e.f.quantity.errors.min)),d.Bb(1),d.jc("ngIf",e.submitted&&(null==e.f.quantity.errors?null:e.f.quantity.errors.max)),d.Bb(1),d.jc("ngIf",e.error))},directives:[s.a,s.g,s.c,u.o,u.j,u.e,m.c,u.l,l.b,u.b,u.i,u.d,i.k,p.b,m.b],styles:[".product-cru-content[_ngcontent-%COMP%]{width:100%;height:90%}mat-card-actions[_ngcontent-%COMP%]{padding:0 10px}mat-form-field[_ngcontent-%COMP%]{width:90%}"]}),t})(),P=(()=>{class t{constructor(t){this.cartService=t,this.items=[],this.cartService.items.forEach((t,e)=>{this.items.push(t)})}ngOnInit(){}updateItem(t){console.log("updateItem",t),this.cartService.items.get(t.id).quantity=t.quantity,this.item={action:c.a.UPD,item:t}}deleteProduct(t){this.cartService.items.delete(t.id),this.item={action:c.a.DEL,item:t}}editProd(t){console.log("editProd",t),this.prod2Edit=t[0]}}return t.\u0275fac=function(e){return new(e||t)(d.Nb(n.a))},t.\u0275cmp=d.Hb({type:t,selectors:[["ecommerce-cart"]],decls:2,vars:4,consts:[[3,"data","addProd","cart","evEditProd","evDelProd"],[3,"prod2Edit","evUpdateProd"]],template:function(t,e){1&t&&(d.Sb(0,"ecommerce-manage-products",0),d.ac("evEditProd",(function(t){return e.editProd(t)}))("evDelProd",(function(t){return e.deleteProduct(t)})),d.Rb(),d.Sb(1,"ecommerce-quantity",1),d.ac("evUpdateProd",(function(t){return e.updateItem(t)})),d.Rb()),2&t&&(d.jc("data",e.items)("addProd",e.item)("cart",!0),d.Bb(1),d.jc("prod2Edit",e.prod2Edit))},directives:[a.a,v],styles:["[_nghost-%COMP%]{display:flex;flex:1;margin:10px 20px;justify-content:space-between}ecommerce-cart[_ngcontent-%COMP%] + ecommerce-cart[_ngcontent-%COMP%]{margin-left:10px}ecommerce-manage-products[_ngcontent-%COMP%]{display:flex;width:70%}ecommerce-quantity[_ngcontent-%COMP%]{display:flex;width:28%;flex-direction:column}"]}),t})();var E=r("ZPsl");let q=(()=>{class t{}return t.\u0275mod=d.Lb({type:t}),t.\u0275inj=d.Kb({factory:function(e){return new(e||t)},imports:[[i.b,E.a,u.m,o.e.forChild([{path:"",pathMatch:"full",component:P}])]]}),t})()}}]);