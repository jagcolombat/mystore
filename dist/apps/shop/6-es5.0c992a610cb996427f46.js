function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var o=0;o<t.length;o++){var i=t[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _createClass(e,t,o){return t&&_defineProperties(e.prototype,t),o&&_defineProperties(e,o),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{D57K:function(e,t,o){"use strict";function i(e,t,o,i){var n,r=arguments.length,c=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,i);else for(var d=e.length-1;d>=0;d--)(n=e[d])&&(c=(r<3?n(c):r>3?n(t,o,c):n(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c}function n(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}o.d(t,"a",(function(){return i})),o.d(t,"b",(function(){return n}))},mJBM:function(e,t,o){"use strict";o.r(t),o.d(t,"ShopAdminModule",(function(){return j}));var i,n,r,c=o("2kYt"),d=o("sEIs"),a=function(e){return e.ADD="ADD",e.UPD="UPD",e.DEL="DEL",e}({}),s=o("C17D"),l=o("EM62"),u=o("Meci"),p=["headerButton"],m=((i=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"agInit",value:function(e){this.params=e}},{key:"onMenuClicked",value:function(){this.params.context.componentParent.selectOrDeselectAll()}},{key:"refresh",value:function(e){return!1}}]),e}()).\u0275fac=function(e){return new(e||i)},i.\u0275cmp=l.Hb({type:i,selectors:[["ecommerce-loading-overlay"]],viewQuery:function(e,t){var o;1&e&&l.yc(p,!0,l.l),2&e&&l.lc(o=l.bc())&&(t.headerButton=o.first)},decls:4,vars:1,consts:[[1,"customHeaderLabel",3,"click"],["headerButton",""]],template:function(e,t){1&e&&(l.Sb(0,"div"),l.Sb(1,"div",0,1),l.ac("click",(function(){return t.onMenuClicked()})),l.uc(3),l.Rb(),l.Rb()),2&e&&(l.Bb(3),l.vc(t.params.displayName))},styles:[".customHeaderLabel[_ngcontent-%COMP%] {\n          margin-left: 5px;\n          margin-top: 3px;\n      }"]}),i),f=o("1ZKx"),h=((n=function(){function e(){_classCallCheck(this,e),this.updateData=new l.n,this.evSelItem=new l.n,this.subscriptions=[],this.selectableProd=!0,this.context={componentParent:this}}return _createClass(e,[{key:"ngOnChanges",value:function(e){if(console.log("change",e),e.data&&this.gridReady&&this.updateItems(),e.item&&this.gridReady)switch(this.item.action){case a.ADD:this.onAddRow(this.item.item);break;case a.UPD:this.onUpdateRow(this.item.item);break;case a.DEL:this.onDeleteRow(this.item.item)}}},{key:"ngOnInit",value:function(){this.updateGridOptions()}},{key:"onGridReady",value:function(e){console.log("on grid ready"),this.gridReady=!0,this.gridApi=e.api,this.data&&this.updateItems(this.data)}},{key:"createColumnDefs",value:function(){var e=this;this.columnDefs=[{headerCheckboxSelection:this.selectableProd,checkboxSelection:this.selectableProd}],this.columns.map((function(t,o,i){e.columnDefs[o]=Object.assign(Object.assign({},e.columnDefs[o]),{headerComponentFramework:m,headerComponentParams:{displayName:t.title},field:t.field,type:t.type,width:t.width})}))}},{key:"updateGridOptions",value:function(){var e=this;console.log("update grid options"),this.gridOptions={rowData:[],rowSelection:"multiple",rowClassRules:{"refund-prod":"data.isRefund === true"},onGridReady:function(){console.log("grid ready on update grid options"),e.gridOptions.api.sizeColumnsToFit()},onRowSelected:function(t){console.log("onRowSelected",t),e.evSelItem.emit(e.gridOptions.api.getSelectedRows())},onRowClicked:function(t){console.log("onRowClicked",t),e.evSelItem.emit(e.gridOptions.api.getSelectedRows())},onBodyScroll:function(t){e.gridOptions.api.sizeColumnsToFit()},onGridColumnsChanged:function(){e.gridOptions.api.sizeColumnsToFit()},rowHeight:60,rowStyle:{"font-size":"16px"}},this.createColumnDefs()}},{key:"selectOrDeselectAll",value:function(){this.selectableProd&&(this.gridOptions.api.getSelectedNodes().length!==this.gridOptions.api.getDisplayedRowCount()?this.gridOptions.api.selectAll():this.gridOptions.api.deselectAll())}},{key:"onAddRow",value:function(e){console.log("onAddRow",e,this.gridOptions.api.getDisplayedRowCount()),e.price=Number(e.price).toFixed(2),this.gridOptions.api.updateRowData({add:[e]})}},{key:"onDeleteRow",value:function(e){console.log("onDeleteRow",e),this.gridOptions.api.updateRowData({remove:[e]}),this.gridOptions.api.deselectAll()}},{key:"onUpdateRow",value:function(e){console.log("onUpdateRow",e,this.gridOptions.api.getDisplayedRowCount()),e.price=Number(e.price).toFixed(2),this.gridOptions.api.deselectAll(),this.gridOptions.api.forEachNode((function(t){t.data.id===e.id&&t.setData(e)}))}},{key:"getRowData",value:function(){var e=[];return this.gridOptions.api.forEachNode((function(t){e.push(t.data)})),console.log("Row Data:",e),e}},{key:"clearData",value:function(){this.gridOptions.api.setRowData([])}},{key:"updateItems",value:function(e){var t=this;this.clearData(),this.data.map((function(e){console.log("updateItems",e),t.onAddRow(e)}))}},{key:"ngOnDestroy",value:function(){this.subscriptions.map((function(e){return e.unsubscribe()}))}}]),e}()).\u0275fac=function(e){return new(e||n)},n.\u0275cmp=l.Hb({type:n,selectors:[["ecommerce-ag-grid"]],inputs:{columns:"columns",data:"data",item:"item"},outputs:{updateData:"updateData",evSelItem:"evSelItem"},features:[l.zb],decls:1,vars:5,consts:[[1,"ag-theme-material",3,"gridOptions","context","columnDefs","rowMultiSelectWithClick","suppressRowClickSelection","gridReady"]],template:function(e,t){1&e&&(l.Sb(0,"ag-grid-angular",0),l.ac("gridReady",(function(e){return t.onGridReady(e)})),l.Rb()),2&e&&l.jc("gridOptions",t.gridOptions)("context",t.context)("columnDefs",t.columnDefs)("rowMultiSelectWithClick",t.selectableProd)("suppressRowClickSelection",!t.selectableProd)},directives:[f.a],styles:["ag-grid-angular[_ngcontent-%COMP%]{width:100%;height:100%}ag-grid-angular[_ngcontent-%COMP%] > .customHeaderLabel[_ngcontent-%COMP%]{width:100%!important}ag-grid-angular[_ngcontent-%COMP%] > [col-id=total][_ngcontent-%COMP%] > .customHeaderLabel[_ngcontent-%COMP%]{display:flex;justify-content:flex-end}  .ag-theme-material .ag-header-row{font-size:16px!important}"]}),n),b=o("PBFl"),g=((r=function(){function e(){_classCallCheck(this,e),this.evEditProd=new l.n,this.evDelProd=new l.n,this.editBtnDisabled=!0,this.delBtnDisabled=!0,this.columDefs=[{field:"name",title:"Name",width:80},{field:"description",title:"Description",width:100},{field:"price",title:"Price",width:50,type:"numericColumn"}]}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"selProduct",value:function(e){console.log("selProduct",e),this.selectedProds=e,this.editBtnDisabled=this.delBtnDisabled=1!==e.length}},{key:"deleteProd",value:function(){console.log("deleteProd",this.selectedProds),this.evDelProd.emit(this.selectedProds[0])}},{key:"editProd",value:function(){console.log("editProd",this.selectedProds),this.evEditProd.emit(this.selectedProds)}}]),e}()).\u0275fac=function(e){return new(e||r)},r.\u0275cmp=l.Hb({type:r,selectors:[["ecommerce-manage-products"]],inputs:{data:"data",addProd:"addProd"},outputs:{evEditProd:"evEditProd",evDelProd:"evDelProd"},decls:10,vars:5,consts:[[1,"product-list"],[1,"product-list-content"],["fxFlex","50",1,"container",3,"data","item","columns","evSelItem"],["mat-raised-button","",3,"disabled","click"]],template:function(e,t){1&e&&(l.Sb(0,"mat-card",0),l.Sb(1,"mat-card-subtitle"),l.uc(2,"List of Products"),l.Rb(),l.Sb(3,"mat-card-content",1),l.Sb(4,"ecommerce-ag-grid",2),l.ac("evSelItem",(function(e){return t.selProduct(e)})),l.Rb(),l.Rb(),l.Sb(5,"mat-card-actions"),l.Sb(6,"button",3),l.ac("click",(function(){return t.editProd()})),l.uc(7,"Edit"),l.Rb(),l.Sb(8,"button",3),l.ac("click",(function(){return t.deleteProd()})),l.uc(9,"Delete"),l.Rb(),l.Rb(),l.Rb()),2&e&&(l.Bb(4),l.jc("data",t.data)("item",t.addProd)("columns",t.columDefs),l.Bb(2),l.jc("disabled",t.editBtnDisabled),l.Bb(2),l.jc("disabled",t.delBtnDisabled))},directives:[u.a,u.g,u.c,h,u.b,b.b],styles:[".container[_ngcontent-%COMP%]{display:flex;height:100%;width:100%}.product-list[_ngcontent-%COMP%]{display:flex;width:100%;flex-direction:column}.product-list-content[_ngcontent-%COMP%]{width:100%;height:90%}mat-card-actions[_ngcontent-%COMP%]{padding:0 10px}"]}),r),v=o("nIj0");o("D57K");var P=o("29Wa"),y=o("Cd2c"),w=["formDirective"];function C(e,t){1&e&&(l.Sb(0,"mat-error"),l.uc(1," Product name is a required field "),l.Rb())}function D(e,t){1&e&&(l.Sb(0,"mat-error"),l.uc(1," Product price is a required field "),l.Rb())}function R(e,t){1&e&&(l.Sb(0,"mat-error"),l.uc(1," Product price must be major equal than 0 "),l.Rb())}function k(e,t){1&e&&(l.Sb(0,"mat-error"),l.uc(1," Product price must be minor equal than 1000 "),l.Rb())}function O(e,t){if(1&e&&(l.Sb(0,"mat-error",9),l.uc(1),l.Rb()),2&e){var o=l.ec();l.Bb(1),l.vc(o.error)}}var S,E,x,_=((E=function(){function e(t){_classCallCheck(this,e),this.formBuilder=t,this.evAddProd=new l.n,this.evUpdateProd=new l.n,this.prod2Edit={id:"",name:"",price:void 0,description:""},this.error="",this.submitted=!1}return _createClass(e,[{key:"ngOnChanges",value:function(e){console.log("changes",e),e.prod2Edit&&this.form.patchValue({name:this.prod2Edit.name,price:this.prod2Edit.price,description:this.prod2Edit.description}),e.error&&console.error(e.error)}},{key:"ngOnInit",value:function(){console.log("ngOnInit",this.prod2Edit),this.form=this.formBuilder.group({name:["",v.n.required],price:["",[v.n.required,v.n.min(0),v.n.max(1e3)]],description:["",v.n.maxLength(250)]})}},{key:"onSubmit",value:function(){console.log("form",this.f),this.submitted=!0,this.form.valid&&(console.log(this.prod2Edit),this.prod2Edit&&""!==this.prod2Edit.id?this.updateProduct():this.saveProduct())}},{key:"saveProduct",value:function(){this.evAddProd.emit({name:this.f.name.value,price:this.f.price.value,description:this.f.description.value}),this.formDirective.resetForm()}},{key:"updateProduct",value:function(){this.evUpdateProd.emit({id:this.prod2Edit.id,name:this.f.name.value,price:this.f.price.value,description:this.f.description.value}),this.resetProdEdit(),this.formDirective.resetForm()}},{key:"resetProdEdit",value:function(){this.prod2Edit={id:"",name:"",price:void 0,description:""}}},{key:"f",get:function(){return this.form.controls}}]),e}()).\u0275fac=function(e){return new(e||E)(l.Nb(v.c))},E.\u0275cmp=l.Hb({type:E,selectors:[["ecommerce-cru-product"]],viewQuery:function(e,t){var o;1&e&&l.yc(w,!0),2&e&&l.lc(o=l.bc())&&(t.formDirective=o.first)},inputs:{prod2Edit:"prod2Edit",error:"error"},outputs:{evAddProd:"evAddProd",evUpdateProd:"evUpdateProd"},features:[l.zb],decls:20,vars:9,consts:[[1,"product-cru"],[3,"formGroup","ngSubmit"],["formDirective","ngForm"],["type","text","matInput","","placeholder","Name*","formControlName","name",3,"value"],[4,"ngIf"],["type","number","matInput","","placeholder","Price*","formControlName","price",3,"value"],["matInput","","rows","3","placeholder","Description","formControlName","description",3,"value"],["class","alert",4,"ngIf"],["mat-raised-button","","color","primary","type","submit"],[1,"alert"]],template:function(e,t){1&e&&(l.Sb(0,"mat-card",0),l.Sb(1,"mat-card-subtitle"),l.uc(2,"Add/Edit Product"),l.Rb(),l.Sb(3,"mat-card-content"),l.Sb(4,"form",1,2),l.ac("ngSubmit",(function(){return t.onSubmit()})),l.Sb(6,"mat-form-field"),l.Ob(7,"input",3),l.tc(8,C,2,0,"mat-error",4),l.Rb(),l.Sb(9,"mat-form-field"),l.Ob(10,"input",5),l.tc(11,D,2,0,"mat-error",4),l.tc(12,R,2,0,"mat-error",4),l.tc(13,k,2,0,"mat-error",4),l.Rb(),l.Sb(14,"mat-form-field"),l.Sb(15,"textarea",6),l.uc(16,"        "),l.Rb(),l.Rb(),l.tc(17,O,2,1,"mat-error",7),l.Sb(18,"button",8),l.uc(19,"Save"),l.Rb(),l.Rb(),l.Rb(),l.Rb()),2&e&&(l.Bb(4),l.jc("formGroup",t.form),l.Bb(3),l.jc("value",null==t.prod2Edit?null:t.prod2Edit.name),l.Bb(1),l.jc("ngIf",t.submitted&&(null==t.f.name.errors?null:t.f.name.errors.required)),l.Bb(2),l.jc("value",null==t.prod2Edit?null:t.prod2Edit.price),l.Bb(1),l.jc("ngIf",t.submitted&&(null==t.f.price.errors?null:t.f.price.errors.required)),l.Bb(1),l.jc("ngIf",t.submitted&&(null==t.f.price.errors?null:t.f.price.errors.min)),l.Bb(1),l.jc("ngIf",t.submitted&&(null==t.f.price.errors?null:t.f.price.errors.max)),l.Bb(2),l.jc("value",null==t.prod2Edit?null:t.prod2Edit.description),l.Bb(2),l.jc("ngIf",t.error))},directives:[u.a,u.g,u.c,v.o,v.j,v.e,P.c,y.b,v.b,v.i,v.d,c.k,v.l,b.b,P.b],styles:[".product-cru-content[_ngcontent-%COMP%]{width:100%;height:90%}mat-card-actions[_ngcontent-%COMP%]{padding:0 10px}mat-form-field[_ngcontent-%COMP%]{width:90%}textarea[_ngcontent-%COMP%]{max-height:100px}"]}),E),B=((S=function(){function e(t){var o=this;_classCallCheck(this,e),this.prodService=t,this.responseErr="",this.prodService.getProducts().subscribe((function(e){console.log("products",e),o.products=e.products}),(function(e){return console.error(e)}))}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"addProduct",value:function(e){var t=this;console.log("addProduct",e),this.prodService.saveProduct(e).subscribe((function(e){console.log("added product",e),t.product={action:a.ADD,item:e},t.responseErr=""}),(function(e){console.error(e),t.responseErr=e}))}},{key:"updateProduct",value:function(e){var t=this;console.log("updateProduct",e),this.prodService.updateProduct(e).subscribe((function(e){console.log("updated product",e),t.product={action:a.UPD,item:e},t.responseErr=""}),(function(e){console.error(e),t.responseErr=e}))}},{key:"deleteProduct",value:function(e){var t=this;this.prodService.deleteProduct(e.id).subscribe((function(o){console.log("deleted product",o),t.product={action:a.DEL,item:e}}),(function(e){return console.error(e)}))}},{key:"editProd",value:function(e){console.log("editProd",e),this.prod2Edit=e[0]}}]),e}()).\u0275fac=function(e){return new(e||S)(l.Nb(s.a))},S.\u0275cmp=l.Hb({type:S,selectors:[["ecommerce-admin"]],decls:2,vars:4,consts:[[3,"data","addProd","evEditProd","evDelProd"],[3,"prod2Edit","error","evAddProd","evUpdateProd"]],template:function(e,t){1&e&&(l.Sb(0,"ecommerce-manage-products",0),l.ac("evEditProd",(function(e){return t.editProd(e)}))("evDelProd",(function(e){return t.deleteProduct(e)})),l.Rb(),l.Sb(1,"ecommerce-cru-product",1),l.ac("evAddProd",(function(e){return t.addProduct(e)}))("evUpdateProd",(function(e){return t.updateProduct(e)})),l.Rb()),2&e&&(l.jc("data",t.products)("addProd",t.product),l.Bb(1),l.jc("prod2Edit",t.prod2Edit)("error",t.responseErr))},directives:[g,_],styles:["[_nghost-%COMP%]{display:flex;flex:1;margin:10px 20px;justify-content:space-between}ecommerce-admin[_ngcontent-%COMP%] + ecommerce-admin[_ngcontent-%COMP%]{margin-left:10px}ecommerce-manage-products[_ngcontent-%COMP%]{display:flex;width:60%}ecommerce-cru-product[_ngcontent-%COMP%]{display:flex;width:38%;flex-direction:column}"]}),S),I=o("ZPsl"),j=((x=function e(){_classCallCheck(this,e)}).\u0275mod=l.Lb({type:x}),x.\u0275inj=l.Kb({factory:function(e){return new(e||x)},imports:[[c.b,d.e.forChild([{path:"",component:B}]),I.a,v.m]]}),x)}}]);