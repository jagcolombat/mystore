(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{mJBM:function(r,e,t){"use strict";t.r(e),t.d(e,"ShopAdminModule",(function(){return x}));var o=t("2kYt"),i=t("sEIs"),d=t("oMD5"),c=t("C17D"),n=t("EM62"),s=t("xQ0O"),u=t("nIj0"),a=(t("hv/J"),t("Meci")),p=t("29Wa"),l=t("Cd2c"),m=t("PBFl");const b=["formDirective"];function f(r,e){1&r&&(n.Sb(0,"mat-error"),n.uc(1," Product name is a required field "),n.Rb())}function h(r,e){1&r&&(n.Sb(0,"mat-error"),n.uc(1," Product price is a required field "),n.Rb())}function P(r,e){1&r&&(n.Sb(0,"mat-error"),n.uc(1," Product price must be major equal than 0 "),n.Rb())}function v(r,e){1&r&&(n.Sb(0,"mat-error"),n.uc(1," Product price must be minor equal than 1000 "),n.Rb())}function g(r,e){if(1&r&&(n.Sb(0,"mat-error",9),n.uc(1),n.Rb()),2&r){const r=n.ec();n.Bb(1),n.vc(r.error)}}let E=(()=>{class r{constructor(r){this.formBuilder=r,this.evAddProd=new n.n,this.evUpdateProd=new n.n,this.prod2Edit={id:"",name:"",price:void 0,description:""},this.error="",this.submitted=!1,this.form=this.formBuilder.group({name:["",u.n.required],price:["",[u.n.required,u.n.min(0),u.n.max(1e3)]],description:["",u.n.maxLength(250)]})}ngOnChanges(r){console.log("changes",r),r.prod2Edit&&this.form.patchValue({name:this.prod2Edit.name,price:this.prod2Edit.price,description:this.prod2Edit.description}),r.error&&console.error(r.error)}ngOnInit(){console.log("ngOnInit",this.prod2Edit)}get f(){return this.form.controls}onSubmit(){console.log("form",this.f),this.submitted=!0,this.form.valid&&(console.log(this.prod2Edit),this.prod2Edit&&""!==this.prod2Edit.id?this.updateProduct():this.saveProduct())}saveProduct(){this.evAddProd.emit({name:this.f.name.value,price:this.f.price.value,description:this.f.description.value}),this.formDirective.resetForm()}updateProduct(){this.evUpdateProd.emit({id:this.prod2Edit.id,name:this.f.name.value,price:this.f.price.value,description:this.f.description.value}),this.resetProdEdit(),this.formDirective.resetForm()}resetProdEdit(){this.prod2Edit={id:"",name:"",price:void 0,description:""}}}return r.\u0275fac=function(e){return new(e||r)(n.Nb(u.c))},r.\u0275cmp=n.Hb({type:r,selectors:[["ecommerce-cru-product"]],viewQuery:function(r,e){var t;1&r&&n.yc(b,!0),2&r&&n.lc(t=n.bc())&&(e.formDirective=t.first)},inputs:{prod2Edit:"prod2Edit",error:"error"},outputs:{evAddProd:"evAddProd",evUpdateProd:"evUpdateProd"},features:[n.zb],decls:20,vars:9,consts:[[1,"product-cru"],[3,"formGroup","ngSubmit"],["formDirective","ngForm"],["type","text","matInput","","placeholder","Name*","formControlName","name",3,"value"],[4,"ngIf"],["type","number","matInput","","placeholder","Price*","formControlName","price",3,"value"],["matInput","","rows","3","placeholder","Description","formControlName","description",3,"value"],["class","alert",4,"ngIf"],["mat-raised-button","","color","primary","type","submit"],[1,"alert"]],template:function(r,e){1&r&&(n.Sb(0,"mat-card",0),n.Sb(1,"mat-card-subtitle"),n.uc(2,"Add/Edit Product"),n.Rb(),n.Sb(3,"mat-card-content"),n.Sb(4,"form",1,2),n.ac("ngSubmit",(function(){return e.onSubmit()})),n.Sb(6,"mat-form-field"),n.Ob(7,"input",3),n.tc(8,f,2,0,"mat-error",4),n.Rb(),n.Sb(9,"mat-form-field"),n.Ob(10,"input",5),n.tc(11,h,2,0,"mat-error",4),n.tc(12,P,2,0,"mat-error",4),n.tc(13,v,2,0,"mat-error",4),n.Rb(),n.Sb(14,"mat-form-field"),n.Sb(15,"textarea",6),n.uc(16,"        "),n.Rb(),n.Rb(),n.tc(17,g,2,1,"mat-error",7),n.Sb(18,"button",8),n.uc(19,"Save"),n.Rb(),n.Rb(),n.Rb(),n.Rb()),2&r&&(n.Bb(4),n.jc("formGroup",e.form),n.Bb(3),n.jc("value",null==e.prod2Edit?null:e.prod2Edit.name),n.Bb(1),n.jc("ngIf",e.submitted&&(null==e.f.name.errors?null:e.f.name.errors.required)),n.Bb(2),n.jc("value",null==e.prod2Edit?null:e.prod2Edit.price),n.Bb(1),n.jc("ngIf",e.submitted&&(null==e.f.price.errors?null:e.f.price.errors.required)),n.Bb(1),n.jc("ngIf",e.submitted&&(null==e.f.price.errors?null:e.f.price.errors.min)),n.Bb(1),n.jc("ngIf",e.submitted&&(null==e.f.price.errors?null:e.f.price.errors.max)),n.Bb(2),n.jc("value",null==e.prod2Edit?null:e.prod2Edit.description),n.Bb(2),n.jc("ngIf",e.error))},directives:[a.a,a.g,a.c,u.o,u.j,u.e,p.c,l.b,u.b,u.i,u.d,o.k,u.l,m.b,p.b],styles:[".product-cru-content[_ngcontent-%COMP%]{width:100%;height:90%}mat-card-actions[_ngcontent-%COMP%]{padding:0 10px}mat-form-field[_ngcontent-%COMP%]{width:90%}textarea[_ngcontent-%COMP%]{max-height:100px}"]}),r})(),S=(()=>{class r{constructor(r){this.prodService=r,this.responseErr="",this.prodService.getProducts().subscribe(r=>{console.log("products",r),this.products=r.products},r=>console.error(r))}ngOnInit(){}addProduct(r){console.log("addProduct",r),this.prodService.saveProduct(r).subscribe(r=>{console.log("added product",r),this.product={action:d.a.ADD,item:r},this.responseErr=""},r=>{console.error(r),this.responseErr=r})}updateProduct(r){console.log("updateProduct",r),this.prodService.updateProduct(r).subscribe(r=>{console.log("updated product",r),this.product={action:d.a.UPD,item:r},this.responseErr=""},r=>{console.error(r),this.responseErr=r})}deleteProduct(r){this.prodService.deleteProduct(r.id).subscribe(e=>{console.log("deleted product",e),this.product={action:d.a.DEL,item:r}},r=>console.error(r))}editProd(r){console.log("editProd",r),this.prod2Edit=r[0]}}return r.\u0275fac=function(e){return new(e||r)(n.Nb(c.b))},r.\u0275cmp=n.Hb({type:r,selectors:[["ecommerce-admin"]],decls:2,vars:4,consts:[[3,"data","addProd","evEditProd","evDelProd"],[3,"prod2Edit","error","evAddProd","evUpdateProd"]],template:function(r,e){1&r&&(n.Sb(0,"ecommerce-manage-products",0),n.ac("evEditProd",(function(r){return e.editProd(r)}))("evDelProd",(function(r){return e.deleteProduct(r)})),n.Rb(),n.Sb(1,"ecommerce-cru-product",1),n.ac("evAddProd",(function(r){return e.addProduct(r)}))("evUpdateProd",(function(r){return e.updateProduct(r)})),n.Rb()),2&r&&(n.jc("data",e.products)("addProd",e.product),n.Bb(1),n.jc("prod2Edit",e.prod2Edit)("error",e.responseErr))},directives:[s.a,E],styles:["[_nghost-%COMP%]{display:flex;flex:1;margin:10px 20px;justify-content:space-between}ecommerce-admin[_ngcontent-%COMP%] + ecommerce-admin[_ngcontent-%COMP%]{margin-left:10px}ecommerce-manage-products[_ngcontent-%COMP%]{display:flex;width:60%}ecommerce-cru-product[_ngcontent-%COMP%]{display:flex;width:38%;flex-direction:column}"]}),r})();var w=t("ZPsl");let x=(()=>{class r{}return r.\u0275mod=n.Lb({type:r}),r.\u0275inj=n.Kb({factory:function(e){return new(e||r)},imports:[[o.b,i.e.forChild([{path:"",component:S}]),w.a,u.m]]}),r})()}}]);