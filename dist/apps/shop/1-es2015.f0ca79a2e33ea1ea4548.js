(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{D57K:function(t,e,i){"use strict";function o(t,e,i,o){var n,s=arguments.length,a=s<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,o);else for(var d=t.length-1;d>=0;d--)(n=t[d])&&(a=(s<3?n(a):s>3?n(e,i,a):n(e,i))||a);return s>3&&a&&Object.defineProperty(e,i,a),a}function n(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}i.d(e,"a",(function(){return o})),i.d(e,"b",(function(){return n}))},"hv/J":function(t,e,i){"use strict";i("2kYt"),i("EM62"),i("D57K")},oMD5:function(t,e,i){"use strict";i.d(e,"a",(function(){return o})),i("2kYt"),i("EM62");var o=function(t){return t.ADD="ADD",t.UPD="UPD",t.DEL="DEL",t}({})},xQ0O:function(t,e,i){"use strict";i.d(e,"a",(function(){return u}));var o=i("EM62"),n=i("Meci");const s=["headerButton"];let a=(()=>{class t{constructor(){}agInit(t){this.params=t}onMenuClicked(){this.params.context.componentParent.selectOrDeselectAll()}refresh(t){return!1}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=o.Hb({type:t,selectors:[["ecommerce-loading-overlay"]],viewQuery:function(t,e){var i;1&t&&o.yc(s,!0,o.l),2&t&&o.lc(i=o.bc())&&(e.headerButton=i.first)},decls:4,vars:1,consts:[[1,"customHeaderLabel",3,"click"],["headerButton",""]],template:function(t,e){1&t&&(o.Sb(0,"div"),o.Sb(1,"div",0,1),o.ac("click",(function(){return e.onMenuClicked()})),o.uc(3),o.Rb(),o.Rb()),2&t&&(o.Bb(3),o.vc(e.params.displayName))},styles:[".customHeaderLabel[_ngcontent-%COMP%] {\n          margin-left: 5px;\n          margin-top: 3px;\n      }"]}),t})();var d=i("oMD5"),c=i("1ZKx");let r=(()=>{class t{constructor(){this.updateData=new o.n,this.evSelItem=new o.n,this.items=new Array,this.subscriptions=[],this.selectableProd=!0,this.context={componentParent:this}}ngOnChanges(t){if(console.log("change",t),t.data&&this.gridReady&&this.updateItems(),t.item&&this.gridReady)switch(this.item.action){case d.a.ADD:this.onAddRow(this.item.item);break;case d.a.UPD:this.onUpdateRow(this.item.item);break;case d.a.DEL:this.onDeleteRow(this.item.item)}}ngOnInit(){this.updateGridOptions(),this.footer&&this.setTotal()}onGridReady(t){console.log("on grid ready"),this.gridReady=!0,this.gridApi=t.api,this.data&&this.updateItems(this.data)}createColumnDefs(){this.columnDefs=[{headerCheckboxSelection:this.selectableProd,checkboxSelection:this.selectableProd}],this.columns.map((t,e,i)=>{this.columnDefs[e]=Object.assign(Object.assign({},this.columnDefs[e]),{headerComponentFramework:a,headerComponentParams:{displayName:t.title},field:t.field,type:t.type,width:t.width})})}updateGridOptions(){console.log("update grid options"),this.gridOptions={rowData:[],onGridReady:()=>{console.log("grid ready on update grid options"),this.gridOptions.api.sizeColumnsToFit()},onRowSelected:t=>{console.log("onRowSelected",t),this.evSelItem.emit(this.gridOptions.api.getSelectedRows())},onRowClicked:t=>{console.log("onRowClicked",t),this.evSelItem.emit(this.gridOptions.api.getSelectedRows())},onBodyScroll:t=>{this.gridOptions.api.sizeColumnsToFit()},onGridColumnsChanged:()=>{this.gridOptions.api.sizeColumnsToFit()},rowHeight:60,rowStyle:{"font-size":"16px"}},this.createColumnDefs()}selectOrDeselectAll(){this.selectableProd&&(this.gridOptions.api.getSelectedNodes().length!==this.gridOptions.api.getDisplayedRowCount()?this.gridOptions.api.selectAll():this.gridOptions.api.deselectAll())}onAddRow(t){console.log("onAddRow",t,this.gridOptions.api.getDisplayedRowCount()),t.price=Number(t.price).toFixed(2),this.footer&&this.bottomData.length&&(this.items.push(t),this.calculateTotal()),this.gridOptions.api.updateRowData({add:[t]})}onDeleteRow(t){console.log("onDeleteRow",t),this.footer&&this.bottomData.length&&(this.items.splice(this.items.findIndex((e,i)=>e.id===t.id),1),this.calculateTotal()),this.gridOptions.api.deselectAll(),this.gridOptions.api.updateRowData({remove:[t]})}onUpdateRow(t){this.footer&&this.bottomData.length&&(this.items.splice(this.items.findIndex((e,i)=>e.id===t.id),1,t),this.calculateTotal()),this.gridOptions.api.deselectAll(),this.gridOptions.api.forEachNode((function(e){e.data.id===t.id&&e.setData(t)}))}getRowData(){const t=[];return this.gridOptions.api.forEachNode((function(e){t.push(e.data)})),console.log("Row Data:",t),t}clearData(){this.gridOptions.api.setRowData([]),this.footer&&this.bottomData.length&&this.setTotal()}updateItems(t){this.clearData(),this.data.map(t=>{console.log("updateItems",t),this.onAddRow(t)})}calculateTotal(){let t=0;this.items.forEach((e,i)=>{t+=+e.price*+e.quantity}),this.setTotal(t)}setTotal(t){this.bottomData=[{name:"Total",description:void 0,price:void 0,quantity:t?t.toFixed(2):0}]}ngOnDestroy(){this.subscriptions.map(t=>t.unsubscribe())}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=o.Hb({type:t,selectors:[["ecommerce-ag-grid"]],inputs:{columns:"columns",data:"data",item:"item",footer:"footer"},outputs:{updateData:"updateData",evSelItem:"evSelItem"},features:[o.zb],decls:1,vars:4,consts:[[1,"ag-theme-material",3,"gridOptions","context","columnDefs","pinnedBottomRowData","gridReady"]],template:function(t,e){1&t&&(o.Sb(0,"ag-grid-angular",0),o.ac("gridReady",(function(t){return e.onGridReady(t)})),o.Rb()),2&t&&o.jc("gridOptions",e.gridOptions)("context",e.context)("columnDefs",e.columnDefs)("pinnedBottomRowData",e.bottomData)},directives:[c.a],styles:["ag-grid-angular[_ngcontent-%COMP%]{width:100%;height:100%}ag-grid-angular[_ngcontent-%COMP%] > .customHeaderLabel[_ngcontent-%COMP%]{width:100%!important}ag-grid-angular[_ngcontent-%COMP%] > [col-id=total][_ngcontent-%COMP%] > .customHeaderLabel[_ngcontent-%COMP%]{display:flex;justify-content:flex-end}  .ag-theme-material .ag-header-row{font-size:16px!important}"]}),t})();var l=i("PBFl");let u=(()=>{class t{constructor(){this.title="List of Products",this.evEditProd=new o.n,this.evDelProd=new o.n,this.editBtnDisabled=!0,this.delBtnDisabled=!0,this.columnDefs=[{field:"name",title:"Name",width:80},{field:"description",title:"Description",width:100},{field:"price",title:"Price",width:50,type:"numericColumn"}]}ngOnInit(){this.cart&&this.columnDefs.push({field:"quantity",title:"Quantity",width:50,type:"numericColumn",cellEditor:"numericEditor",editable:!0})}selProduct(t){console.log("selProduct",t),this.selectedProds=t,this.editBtnDisabled=this.delBtnDisabled=1!==t.length}deleteProd(){console.log("deleteProd",this.selectedProds),this.evDelProd.emit(this.selectedProds[0])}editProd(){console.log("editProd",this.selectedProds),this.evEditProd.emit(this.selectedProds)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=o.Hb({type:t,selectors:[["ecommerce-manage-products"]],inputs:{title:"title",cart:"cart",data:"data",addProd:"addProd"},outputs:{evEditProd:"evEditProd",evDelProd:"evDelProd"},decls:10,vars:7,consts:[[1,"product-list"],[1,"product-list-content"],["fxFlex","50",1,"container",3,"data","item","columns","footer","evSelItem"],["mat-raised-button","",3,"disabled","click"]],template:function(t,e){1&t&&(o.Sb(0,"mat-card",0),o.Sb(1,"mat-card-subtitle"),o.uc(2),o.Rb(),o.Sb(3,"mat-card-content",1),o.Sb(4,"ecommerce-ag-grid",2),o.ac("evSelItem",(function(t){return e.selProduct(t)})),o.Rb(),o.Rb(),o.Sb(5,"mat-card-actions"),o.Sb(6,"button",3),o.ac("click",(function(){return e.editProd()})),o.uc(7,"Edit"),o.Rb(),o.Sb(8,"button",3),o.ac("click",(function(){return e.deleteProd()})),o.uc(9,"Delete"),o.Rb(),o.Rb(),o.Rb()),2&t&&(o.Bb(2),o.vc(e.title),o.Bb(2),o.jc("data",e.data)("item",e.addProd)("columns",e.columnDefs)("footer",e.cart),o.Bb(2),o.jc("disabled",e.editBtnDisabled),o.Bb(2),o.jc("disabled",e.delBtnDisabled))},directives:[n.a,n.g,n.c,r,n.b,l.b],styles:[".container[_ngcontent-%COMP%]{display:flex;height:100%;width:100%}.product-list[_ngcontent-%COMP%]{display:flex;width:100%;flex-direction:column}.product-list-content[_ngcontent-%COMP%]{width:100%;height:90%}mat-card-actions[_ngcontent-%COMP%]{padding:0 10px}"]}),t})()}}]);